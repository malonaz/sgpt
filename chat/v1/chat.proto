syntax = "proto3";

package chat.v1;

import "buf/validate/validate.proto";
import "google/api/resource.proto";
import "google/protobuf/descriptor.proto";
import "google/protobuf/timestamp.proto";
import "malonaz/codegen/model/v1/model.proto";

option go_package = "github.com/malonaz/sgpt/genproto/chat/v1";

// A chat represents a conversation between a [contact][user.v1.Contact] and an agent.
message Chat {
  option (google.api.resource) = {
    type: "chat.sgpt.com/Chat"
    pattern: "chats/{chat}"
    singular: "chat"
    plural: "chats"
  };

  option (malonaz.codegen.model.v1.model_opts) = {};

  // The resource name of the chat.
  string name = 1;

  // The creation timestamp of the chat.
  google.protobuf.Timestamp create_time = 2;
  // The last update timestamp of the chat.
  google.protobuf.Timestamp update_time = 3;
  // The deletion timestamp of the chat.
  google.protobuf.Timestamp delete_time = 4 [(malonaz.codegen.model.v1.field_opts).nullable = true];

  // The current state of the chat.
  ChatState state = 5 [(buf.validate.field).enum = {
    defined_only: true
    not_in: [0]
  }];

  // Classification of this chat.
  ChatClassification classification = 6 [(buf.validate.field).enum = {defined_only: true}];

  // Transcript for a chat.
  ChatTranscript transcript = 7 [(malonaz.codegen.model.v1.field_opts).as_proto_bytes = true];

  // Metadata for this chat.
  ChatMetadata metadata = 10 [(malonaz.codegen.model.v1.field_opts).as_proto_bytes = true];
}

// Represents the state of a chat.
enum ChatState {
  // Used to detect an unset field.
  CHAT_STATE_UNSPECIFIED = 0;
}

// Represents the classification of a chat.
enum ChatClassification {
  // Used to detect an unset field.
  CHAT_CLASSIFICATION_UNSPECIFIED = 0;

  // A legitimate new or existing customer.
  CHAT_CLASSIFICATION_LEGITIMATE = 1;

  // Unsolicited sales/marketing (incoming spam)
  CHAT_CLASSIFICATION_SOLICITATION = 2;

  // Likely spam or robocall.
  CHAT_CLASSIFICATION_SPAM = 3;

  // Aborted/hung up before conversation started
  CHAT_CLASSIFICATION_ABORTED = 4;
}

// Metadata for a chat.
message ChatMetadata {}

// Transcript for a chat.
message ChatTranscript {}
